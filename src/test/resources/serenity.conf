// =============================================================================
// CONFIGURACIÓN DE SERENITY BDD - QA Challenge E2E SauceDemo
// =============================================================================

environments {
    default {
        webdriver.base.url = "https://www.saucedemo.com"
    }
}

webdriver {
    driver = chrome
    autodownload = true

    capabilities {
        browserName = "chrome"
        acceptInsecureCerts = true

        "goog:chromeOptions" {
            args = [
                // Evita errores de CORS en Chrome
                "--remote-allow-origins=*",
                // Maximiza la ventana del navegador
                "--start-maximized",
                // Evita errores de memoria compartida en Docker/CI
                "--disable-dev-shm-usage",
                // Requerido para ejecutar en algunos entornos
                "--no-sandbox",
                // Evita prompts de primera ejecución
                "--no-first-run",
                "--no-default-browser-check",
                // Desactiva notificaciones molestas
                "--disable-notifications",
                // Modo incógnito para tests limpios
                "--incognito"
            ]

            // Desactiva el administrador de contraseñas de Chrome
            prefs = {
                "credentials_enable_service" = false
                "profile.password_manager_enabled" = false
                "profile.password_manager_leak_detection" = false
            }
        }
    }
}

serenity {
    // Nombre del proyecto en los reportes
    project.name = "QA Challenge - E2E SauceDemo"
    // Captura screenshots después de cada paso
    take.screenshots = AFTER_EACH_STEP
}